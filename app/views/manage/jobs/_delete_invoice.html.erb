<div class="modal fade" id="basic" tabindex="-1" role="basic" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-hidden="true"></button>
        <h4 class="modal-title" id="del_modal_title"></h4>
      </div>
      <div class="modal-footer" style="border-top: 0 !important;">
        <%= link_to "Delete","#", :class => 'btn red', :id=>"del_invoice" %>
        <button type="button" class="btn default" data-dismiss="modal">Cancel</button>
      </div>
    </div>
  </div>
</div>
<script type="text/javascript">
 var invoice_id;
 var invoice_number;
  $(document).on('click','#basicModalOpen',function(){
    invoice_id = $(this).data("invoice_id");
    invoice_number = $(this).data("invoice_number");
    $("#del_modal_title").text("Confirm delete invoice" + " "+ invoice_number + " ?");
    $("#invoice_id").val(invoice_id);
    // $("#del_invoice").attr("href", "/manage/invoices/" + invoice_number);

  });
   $('#del_invoice').click(function(e){
    $this = $(this);
    e.preventDefault();
    $.ajax({
      url: "/manage/invoices/" + invoice_number,
      type: 'DELETE',
      beforeSend: function() {
        $this.addClass('disabled');
        $this.html("Deleting...");
      }
    })
    .done(function(data) {
      if(data == 0) {
        $modal = $('.modal');
        $modal.modal('hide');
        window.location.reload();
      }
    })
   
  });

</script>