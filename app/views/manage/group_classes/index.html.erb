<a href="<%= manage_levels_path %>" class="toggle-custome" style="top: 20px; right: 20px; padding: 20px; cursor: pointer; position: absolute; background: #d5dade url(/assets/icon-color.png) center no-repeat; z-index: 999;"></a>
<div class="row">
  <div class="col-md-12">
    <h3 class="page-title">
      <%= page_title %>
      <small>
        <%= page_description %>
      </small>
    </h3>
    <% if !@breadcrumbs.nil? %>
      <ul class="page-breadcrumb breadcrumb">
        <li class="btn-group">
          <a class="btn btn-fit-height grey pull-right" href="<%= new_manage_group_class_path %>" data-remote="true"><i class="fa fa-plus"></i> 
            Add class
          </a>
        </li>
        <% @breadcrumbs.each do |breadcrumb| %>
          <li>
            <%= link_to(breadcrumb[:name], breadcrumb[:url]) %>
            <% if @breadcrumbs.last != breadcrumb %>
              <i class="fa fa-angle-right"></i>
            <% end %>
          </li>
        <% end %>
      </ul>
    <% end %>
  </div>
</div>

<div class="">
  <div class=" box blue-madison">
    <div >
      <div class="row">
        <div class="col-md-12">
          <%= form_tag manage_group_classes_search_path, :id => "search_gp_form", :remote => true do %>
            <div class="alert alert-info">
              <div class="row">
                <div class="col-md-3">
                  <div class="form-group">
                    <label>Day</label>
                    <%= select_tag 'day', options_for_select((1..6).map{|i| [Date::DAYNAMES[i], i]}) + options_for_select({Date::DAYNAMES[0] => 0}), :class=>"form-control" , :prompt => "Any" %>
                  </div>
                </div>
                <div class="col-md-3">
                  <div class="form-group">
                    <label>Venue</label>
                    <%= select_tag "venue", options_from_collection_for_select(Venue.order(:name), "id", "name"), {:class => "form-control" ,:prompt => "Any"} %>
                  </div>
                </div>
                <div class="col-md-3">
                  <div class="form-group">
                    <label>Instructor</label>
                    <%= select_tag "instructor", options_from_collection_for_select(Instructor.order(:name), "id", "name"),{:class => "form-control" ,:prompt => "Any"} %>
                  </div>
                </div>
                <div class="col-md-3">
                  <div class="form-group">
                    <label>Age Group</label>
                    <%= select_tag "age_group", options_from_collection_for_select(AgeGroup.all, "id", "title"),{:class => "form-control" ,:prompt => "Any"} %>
                  </div>
                </div>
              </div>
              <div class="row">
                <div class="col-md-12">
                  <div class="pull-right"><%= submit_tag "Search", :class => "btn btn-primary", :id => "search_gp" %></div>
                </div>
              </div>
            </div>
          <% end %>
        </div>
      </div>
      <div class="table-responsive">
        <table class="table">
          <thead>
            <tr>
              <th class="col-sm-1">Day</th>
              <th class="col-sm-1">Time</th>
              <th class="col-sm-1">Duration</th>
              <th class="col-sm-2">Venue</th>
              <th class="col-sm-1">Instructor</th>
              <th class="col-sm-1">Age Group</th>
              <th class="col-sm-1">Fee</th>
              <th class="col-sm-2">Fee Type</th>
              <th class="col-sm-1">Lesson</th>
              <th class="col-sm-1">Updated</th>
            </tr>
          </thead>
          <tbody id="filter_gp" style="font-size: 14px;">

          </tbody>
        </table>
      </div>
    </div>
  </div>
</div>
<script src="http://cdn.datatables.net/1.10.0/js/jquery.dataTables.js" type="text/javascript"></script>
<script src="/assets/custom_datatables.js" type="text/javascript"></script>



<!-- <div class="modal fade" id="basic" tabindex="-1" role="basic" aria-hidden="true">
  <div class="modal-dialog modal-sm">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-hidden="true"></button>
        <h4 class="modal-title" id="del_modal_title">Confirm delete?</h4>
      </div>
      <div class="modal-footer" style="border-top: 0 !important;">
        <%#= link_to "Delete",  "javascript:;", method: :delete, :class=> "btn red destroyGp", :remote => true %>
        <button type="button" class="btn default" data-dismiss="modal">Cancel</button>
      </div>
    </div>
  </div>
</div> -->
<script>
  // $(function(){
  //     var table = $('#datatable_ajax').dataTable({"aLengthMenu": [[500, 1000, 1500, -1], [500, 1000, 1500, "All"]],
  //       "iDisplayLength": 1500});
  //       $('#apply_filter').on('click',function() {
  //           table.fnDraw();
  //       } );
  //   $('#datatable_ajax_wrapper .dataTables_filter input').addClass("form-control input-small"); // modify table search input
  //   $('#datatable_ajax_wrapper .dataTables_length select').addClass("form-control input-small"); // modify table per page dropdown
  //   $('#datatable_ajax_wrapper .dataTables_length select').select2(); // initialize select2 dropdown 
  // });
  $(".prev a").text("<");
  $(".prev span").text("<");
  $(".next a").text(">");
  $(".next span").text(">");
  $(".pagination").css({"float":"right","margin-right": "15px"});
  $('#search_gp_form').on('ajax:beforeSend', function(event) {
    $("#search_gp").val('Searching...').addClass('disabled');
  }).on('ajax:complete', function(event) {
    $("#search_gp").val('Search').removeClass('disabled');
  });

  jQuery(function() {
    var age_group, day, instructor, venue;
    day = $("#day").find("option:selected").text();
    venue = $("#venue").find("option:selected").text();
    instructor = $("#instructor").find("option:selected").text();
    age_group = $("#age_group").find("option:selected").text();
    if (day === "Any" && venue === "Any" && instructor === "Any" && age_group === "Any") {
      $("#search_gp").addClass("disabled");
    }
    $("#day").change(function() {
      day = $("#day").find("option:selected").text();
      venue = $("#venue").find("option:selected").text();
      instructor = $("#instructor").find("option:selected").text();
      age_group = $("#age_group").find("option:selected").text();
      if (day !== "Any") {
        $("#search_gp").removeClass("disabled");
      } else if (day === "Any") {
        if (venue !== "Any" || instructor !== "Any" || age_group !== "Any") {
          $("#search_gp").removeClass("disabled");
        }
        if (day === "Any" && venue === "Any" && instructor === "Any" && age_group === "Any") {
          $("#search_gp").addClass("disabled");
        }
      }
    });
    $("#venue").change(function() {
      day = $("#day").find("option:selected").text();
      venue = $("#venue").find("option:selected").text();
      instructor = $("#instructor").find("option:selected").text();
      age_group = $("#age_group").find("option:selected").text();
      if (venue !== "Any") {
        $("#search_gp").removeClass("disabled");
      } else if (venue === "Any") {
        if (day !== "Any" || venue === "Any" || instructor !== "Any" || age_group !== "Any") {
          $("#search_gp").removeClass("disabled");
        }
        if (day === "Any" && venue === "Any" && instructor === "Any" && age_group === "Any") {
          $("#search_gp").addClass("disabled");
        }
      }
    });
    $("#instructor").change(function() {
      day = $("#day").find("option:selected").text();
      venue = $("#venue").find("option:selected").text();
      instructor = $("#instructor").find("option:selected").text();
      age_group = $("#age_group").find("option:selected").text();
      if (instructor !== "Any") {
        $("#search_gp").removeClass("disabled");
      } else if (instructor === "Any") {
        if (day !== "Any" || venue !== "Any" || instructor === "Any" || age_group !== "Any") {
          $("#search_gp").removeClass("disabled");
        }
        if (day === "Any" && venue === "Any" && instructor === "Any" && age_group === "Any") {
          $("#search_gp").addClass("disabled");
        }
      }
    });
    return $("#age_group").change(function() {
      day = $("#day").find("option:selected").text();
      venue = $("#venue").find("option:selected").text();
      instructor = $("#instructor").find("option:selected").text();
      age_group = $("#age_group").find("option:selected").text();
      if (age_group !== "Any") {
        $("#search_gp").removeClass("disabled");
      } else if (age_group === "Any") {
        if (day !== "Any" || venue !== "Any" || instructor !== "Any" || age_group === "Any") {
          $("#search_gp").removeClass("disabled");
        }
        if (day === "Any" && venue === "Any" && instructor === "Any" && age_group === "Any") {
          $("#search_gp").addClass("disabled");
        }
      }
    });
  });
</script>